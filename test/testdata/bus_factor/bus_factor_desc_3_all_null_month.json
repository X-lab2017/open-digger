{
  "sql": "\nSELECT\n  id,\n  argMax(name, time) AS name,\n  groupArrayInsertAt(\n    0,\n    toUInt32(dateDiff('month', toDate('2015-1-1'), toDate('2016-12-1'))) + 1)(ROUND(bus_factor, 2),\n    toUInt32(dateDiff('month', toDate('2015-1-1'), time))) AS bus_factor,\n  groupArrayInsertAt(\n    [],\n    toUInt32(dateDiff('month', toDate('2015-1-1'), toDate('2016-12-1'))) + 1)(detail,\n    toUInt32(dateDiff('month', toDate('2015-1-1'), time))) AS detail,\n  groupArrayInsertAt(\n    0,\n    toUInt32(dateDiff('month', toDate('2015-1-1'), toDate('2016-12-1'))) + 1)(ROUND(total_contributions, 2),\n    toUInt32(dateDiff('month', toDate('2015-1-1'), time))) AS total_contributions\nFROM\n(\n  SELECT\n    time,\n    id,\n    any(name) AS name,\n    SUM(count) AS total_contributions,\n    length(detail) AS bus_factor,\n    arrayFilter(x -> tupleElement(x, 2) >= quantileExactWeighted(0.5)(count, count), arrayMap((x, y) -> (x, y), groupArray(actor_login), groupArray(count))) AS detail\n  FROM\n  (\n    SELECT\n      toStartOfMonth(created_at) AS time,\n      repo_id AS id, argMax(repo_name, time) AS name,\n      \n          \n    if(type='PullRequestEvent' AND action='closed' AND pull_merged=1, issue_author_id, actor_id) AS actor_id,\n    argMax(if(type='PullRequestEvent' AND action='closed' AND pull_merged=1, issue_author_login, actor_login), created_at) AS actor_login,\n    countIf(type='IssueCommentEvent' AND action='created') AS issue_comment,\n    countIf(type='IssuesEvent' AND action='opened')  AS open_issue,\n    countIf(type='PullRequestEvent' AND action='opened') AS open_pull,\n    countIf(type='PullRequestReviewCommentEvent' AND action='created') AS review_comment,\n    countIf(type='PullRequestEvent' AND action='closed' AND pull_merged=1) AS merged_pull,\n    sqrt(1*issue_comment + 2*open_issue + 3*open_pull + 4*review_comment + 2*merged_pull) AS activity\n,\n          toUInt32(ceil(activity)) AS count\n          \n    FROM gh_events\n    WHERE type IN ('IssuesEvent', 'IssueCommentEvent', 'PullRequestEvent', 'PullRequestReviewCommentEvent') AND (org_id IN [1342004]) AND  created_at >= toDate('2015-1-1') AND created_at < dateAdd(month, 1, toDate('2016-12-1'))\n    GROUP BY id, time, actor_id\n    HAVING actor_login NOT LIKE '%[bot]'\n  )\n  GROUP BY id, time\n  \n)\nGROUP BY id\nORDER BY bus_factor[-1] DESC\n    LIMIT 3",
  "modifiedOption": {
    "orgIds": [
      1342004
    ],
    "startYear": 2015,
    "endYear": 2016,
    "startMonth": 1,
    "endMonth": 12,
    "order": "DESC",
    "limit": 3,
    "limitOption": "all",
    "groupTimeRange": "month",
    "groupBy": null
  },
  "bus_factor_desc_3_all_null_month": [
    {
      "id": "20818126",
      "name": "google/ExoPlayer",
      "bus_factor": [
        "14",
        "51",
        "42",
        "20",
        "25",
        "31",
        "62",
        "73",
        "60",
        "72",
        "87",
        "83",
        "116",
        "111",
        "80",
        "81",
        "75",
        "76",
        "75",
        "94",
        "87",
        "110",
        "102",
        "118"
      ],
      "total_contributions": [
        "101",
        "139",
        "111",
        "126",
        "176",
        "201",
        "192",
        "206",
        "182",
        "214",
        "262",
        "235",
        "307",
        "299",
        "226",
        "227",
        "221",
        "218",
        "197",
        "254",
        "245",
        "319",
        "291",
        "317"
      ]
    },
    {
      "id": "29268051",
      "name": "google/material-design-lite",
      "bus_factor": [
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "140",
        "147",
        "121",
        "37",
        "69",
        "19",
        "23",
        "87",
        "80",
        "82",
        "65",
        "66",
        "66",
        "47",
        "64",
        "53",
        "42",
        "46"
      ],
      "total_contributions": [
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "987",
        "469",
        "348",
        "321",
        "219",
        "292",
        "463",
        "262",
        "253",
        "226",
        "199",
        "200",
        "220",
        "159",
        "194",
        "176",
        "129",
        "146"
      ]
    },
    {
      "id": "23357588",
      "name": "google/protobuf",
      "bus_factor": [
        "16",
        "16",
        "21",
        "21",
        "16",
        "27",
        "24",
        "26",
        "56",
        "32",
        "31",
        "23",
        "38",
        "33",
        "36",
        "35",
        "44",
        "35",
        "40",
        "43",
        "52",
        "94",
        "115",
        "46"
      ],
      "total_contributions": [
        "102",
        "111",
        "133",
        "146",
        "212",
        "207",
        "225",
        "198",
        "170",
        "197",
        "199",
        "161",
        "264",
        "239",
        "248",
        "244",
        "310",
        "280",
        "332",
        "344",
        "393",
        "287",
        "336",
        "320"
      ]
    }
  ]
}
