{
  "sql": "\nSELECT\n  id,\n  argMax(name, time) AS name,\n  groupArrayInsertAt(\n    0,\n    toUInt32(dateDiff('month', toDate('2015-1-1'), toDate('2016-12-1'))) + 1)(ROUND(agg_activity, 2),\n    toUInt32(dateDiff('month', toDate('2015-1-1'), time))) AS activity,\n  groupArrayInsertAt(\n    0,\n    toUInt32(dateDiff('month', toDate('2015-1-1'), toDate('2016-12-1'))) + 1)(ROUND(participants, 2),\n    toUInt32(dateDiff('month', toDate('2015-1-1'), time))) AS participants,\n  groupArrayInsertAt(\n    0,\n    toUInt32(dateDiff('month', toDate('2015-1-1'), toDate('2016-12-1'))) + 1)(ROUND(issue_comment, 2),\n    toUInt32(dateDiff('month', toDate('2015-1-1'), time))) AS issue_comment,\n  groupArrayInsertAt(\n    0,\n    toUInt32(dateDiff('month', toDate('2015-1-1'), toDate('2016-12-1'))) + 1)(ROUND(open_issue, 2),\n    toUInt32(dateDiff('month', toDate('2015-1-1'), time))) AS open_issue,\n  groupArrayInsertAt(\n    0,\n    toUInt32(dateDiff('month', toDate('2015-1-1'), toDate('2016-12-1'))) + 1)(ROUND(open_pull, 2),\n    toUInt32(dateDiff('month', toDate('2015-1-1'), time))) AS open_pull,\n  groupArrayInsertAt(\n    0,\n    toUInt32(dateDiff('month', toDate('2015-1-1'), toDate('2016-12-1'))) + 1)(ROUND(review_comment, 2),\n    toUInt32(dateDiff('month', toDate('2015-1-1'), time))) AS review_comment,\n  groupArrayInsertAt(\n    0,\n    toUInt32(dateDiff('month', toDate('2015-1-1'), toDate('2016-12-1'))) + 1)(ROUND(merged_pull, 2),\n    toUInt32(dateDiff('month', toDate('2015-1-1'), time))) AS merged_pull\n  \nFROM\n(\n  SELECT\n    toStartOfMonth(month) AS time,\n    repo_id AS id, argMax(repo_name, month) AS name,\n    ROUND(SUM(activity), 2) AS agg_activity,\n    COUNT(actor_id) AS participants,\n    SUM(issue_comment) AS issue_comment,\n    SUM(open_issue) AS open_issue,\n    SUM(open_pull) AS open_pull,\n    SUM(review_comment) AS review_comment,\n    SUM(merged_pull) AS merged_pull\n    \n  FROM\n  (\n    SELECT\n      toStartOfMonth(created_at) AS month,\n      repo_id, argMax(repo_name, created_at) AS repo_name,\n      org_id, argMax(org_login, created_at) AS org_login,\n      \n    if(type='PullRequestEvent' AND action='closed' AND pull_merged=1, issue_author_id, actor_id) AS actor_id,\n    argMax(if(type='PullRequestEvent' AND action='closed' AND pull_merged=1, issue_author_login, actor_login), created_at) AS actor_login,\n    countIf(type='IssueCommentEvent' AND action='created') AS issue_comment,\n    countIf(type='IssuesEvent' AND action='opened')  AS open_issue,\n    countIf(type='PullRequestEvent' AND action='opened') AS open_pull,\n    countIf(type='PullRequestReviewCommentEvent' AND action='created') AS review_comment,\n    countIf(type='PullRequestEvent' AND action='closed' AND pull_merged=1) AS merged_pull,\n    sqrt(1*issue_comment + 2*open_issue + 3*open_pull + 4*review_comment + 2*merged_pull) AS activity\n\n    FROM gh_events\n    WHERE type IN ('IssuesEvent', 'IssueCommentEvent', 'PullRequestEvent', 'PullRequestReviewCommentEvent') AND (org_id IN [1342004]) AND  created_at >= toDate('2015-1-1') AND created_at < dateAdd(month, 1, toDate('2016-12-1'))\n    GROUP BY repo_id, org_id, actor_id, month\n    HAVING activity > 0\n  )\n  GROUP BY id, time\n  \n)\nGROUP BY id\nORDER BY activity[-1] DESC\n    LIMIT 3",
  "modifiedOption": {
    "orgIds": [
      1342004
    ],
    "startYear": 2015,
    "endYear": 2016,
    "startMonth": 1,
    "endMonth": 12,
    "order": "DESC",
    "limit": 3,
    "limitOption": "all",
    "groupTimeRange": "month",
    "groupBy": null
  },
  "repo_activity_desc_3_all_null_month": [
    {
      "id": "23357588",
      "name": "google/protobuf",
      "activity": [
        80.95,
        92.45,
        103.93,
        116.19,
        178.91,
        170.15,
        181.2,
        163.36,
        135.1,
        163.85,
        160.28,
        129.01,
        207.13,
        187.02,
        198.41,
        200.67,
        252.42,
        224.43,
        272.97,
        273.57,
        318.81,
        225.42,
        265.29,
        257.25
      ],
      "participants": [
        "41",
        "45",
        "56",
        "57",
        "69",
        "78",
        "91",
        "70",
        "75",
        "76",
        "80",
        "67",
        "114",
        "100",
        "107",
        "98",
        "121",
        "115",
        "134",
        "147",
        "165",
        "129",
        "149",
        "135"
      ],
      "issue_comment": [
        "82",
        "135",
        "169",
        "169",
        "381",
        "311",
        "361",
        "298",
        "203",
        "203",
        "246",
        "121",
        "348",
        "331",
        "339",
        "368",
        "398",
        "414",
        "471",
        "459",
        "511",
        "389",
        "508",
        "454"
      ],
      "open_issue": [
        "14",
        "16",
        "24",
        "34",
        "51",
        "52",
        "42",
        "35",
        "36",
        "42",
        "43",
        "32",
        "67",
        "43",
        "40",
        "52",
        "69",
        "50",
        "75",
        "80",
        "91",
        "55",
        "68",
        "59"
      ],
      "open_pull": [
        "21",
        "23",
        "17",
        "27",
        "68",
        "64",
        "71",
        "75",
        "24",
        "40",
        "43",
        "38",
        "49",
        "42",
        "46",
        "51",
        "88",
        "50",
        "90",
        "64",
        "80",
        "41",
        "48",
        "65"
      ],
      "review_comment": [
        "115",
        "48",
        "15",
        "61",
        "169",
        "58",
        "188",
        "65",
        "27",
        "148",
        "68",
        "28",
        "29",
        "57",
        "43",
        "70",
        "73",
        "216",
        "114",
        "167",
        "70",
        "37",
        "16",
        "31"
      ],
      "merged_pull": [
        "4",
        "19",
        "12",
        "19",
        "57",
        "49",
        "55",
        "67",
        "15",
        "30",
        "31",
        "31",
        "32",
        "41",
        "28",
        "35",
        "60",
        "28",
        "75",
        "40",
        "62",
        "25",
        "37",
        "45"
      ]
    },
    {
      "id": "20818126",
      "name": "google/ExoPlayer",
      "activity": [
        82.93,
        107.51,
        88.25,
        101.19,
        142.58,
        159.02,
        153.26,
        159.72,
        148.84,
        164.81,
        207.15,
        181.64,
        241.06,
        236.98,
        180.39,
        177.25,
        170.7,
        169.32,
        147.91,
        198.04,
        191.35,
        250.87,
        224.98,
        250.62
      ],
      "participants": [
        "41",
        "58",
        "52",
        "54",
        "81",
        "85",
        "85",
        "96",
        "83",
        "101",
        "122",
        "114",
        "140",
        "142",
        "113",
        "113",
        "104",
        "112",
        "97",
        "124",
        "125",
        "146",
        "137",
        "146"
      ],
      "issue_comment": [
        "147",
        "217",
        "164",
        "266",
        "296",
        "369",
        "368",
        "359",
        "374",
        "323",
        "443",
        "330",
        "522",
        "503",
        "316",
        "326",
        "372",
        "307",
        "241",
        "376",
        "361",
        "520",
        "520",
        "403"
      ],
      "open_issue": [
        "34",
        "37",
        "34",
        "45",
        "57",
        "78",
        "77",
        "66",
        "62",
        "64",
        "85",
        "74",
        "102",
        "96",
        "68",
        "77",
        "54",
        "72",
        "55",
        "76",
        "82",
        "116",
        "98",
        "110"
      ],
      "open_pull": [
        "13",
        "21",
        "11",
        "5",
        "26",
        "4",
        "11",
        "8",
        "17",
        "16",
        "14",
        "13",
        "15",
        "14",
        "14",
        "5",
        "18",
        "8",
        "6",
        "9",
        "7",
        "20",
        "8",
        "29"
      ],
      "review_comment": [
        "23",
        "37",
        "3",
        "5",
        "0",
        "40",
        "0",
        "2",
        "24",
        "52",
        "33",
        "0",
        "3",
        "7",
        "32",
        "23",
        "17",
        "0",
        "10",
        "17",
        "8",
        "5",
        "6",
        "15"
      ],
      "merged_pull": [
        "11",
        "14",
        "6",
        "2",
        "18",
        "5",
        "6",
        "2",
        "7",
        "8",
        "3",
        "5",
        "5",
        "4",
        "3",
        "4",
        "9",
        "2",
        "1",
        "2",
        "4",
        "14",
        "0",
        "13"
      ]
    },
    {
      "id": "63809205",
      "name": "google/oss-fuzz",
      "activity": [
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        4.38,
        7.75,
        45.44,
        50.48,
        172.77
      ],
      "participants": [
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "2",
        "5",
        "8",
        "10",
        "54"
      ],
      "issue_comment": [
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "6",
        "71",
        "94",
        "444"
      ],
      "open_issue": [
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "31",
        "14",
        "49"
      ],
      "open_pull": [
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "1",
        "2",
        "27",
        "30",
        "77"
      ],
      "review_comment": [
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "6",
        "0",
        "51",
        "40",
        "52"
      ],
      "merged_pull": [
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "0",
        "1",
        "2",
        "23",
        "25",
        "74"
      ]
    }
  ]
}
